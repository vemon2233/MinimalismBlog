# 博客系统数据管理

本文档说明如何管理博客系统的数据，包括模拟数据生成和数据库操作。

## 可用脚本

### 1. `populate_demo_data.py` - 演示数据填充脚本
**用途**：快速生成演示数据，用于开发和测试
**特点**：
- 无需用户确认，直接运行
- 生成适量的测试数据（6篇文章，8个标签，15条评论）
- 自动检查数据库连接
- 提供使用提示

**使用方法**：
```bash
cd Blog-Server
python populate_demo_data.py
```

**输出示例**：
```
==================================================
博客系统演示数据填充工具
==================================================
检查数据库连接...
数据库连接正常
正在创建演示数据...
1. 创建标签...
   创建了 8 个标签
2. 创建文章...
   创建了 6 篇文章
3. 为文章分配标签...
   创建了 15 个文章-标签关系
4. 创建评论...
   创建了 15 条评论
...
```

### 2. `seed_data.py` - 完整种子数据脚本
**用途**：生成更全面的测试数据
**特点**：
- 生成更多数据（20篇文章，10个标签，最多60条评论）
- 需要用户确认
- 提供清空现有数据的选项
- 更复杂的数据生成逻辑

**使用方法**：
```bash
cd Blog-Server
python seed_data.py
```

## 生成的数据结构

### 标签（Tags）
- Python, Vue, Flask, 数据库, 前端, 后端, DevOps, 机器学习, 安全, 工具

### 文章（Articles）
- 6-20篇技术文章，涵盖Web开发、数据库、前端、后端等主题
- 每篇文章包含：标题、内容、摘要、阅读时间、浏览量、点赞数、评论数
- 文章按时间分布（最近180天内）

### 评论（Comments）
- 每篇文章有1-3条评论
- 评论作者使用中文姓名
- 评论内容为常见的反馈语句

### 文章-标签关系
- 每篇文章分配2-4个随机标签
- 建立多对多关系

## API端点测试

数据生成后，可以测试以下API端点：

### 文章相关
- `GET /article/get-list` - 获取文章列表（支持分页、标签筛选、归档筛选）
- `GET /article/single/<id>` - 获取单篇文章详情
- `GET /article/hot-articles` - 获取热门文章
- `GET /article/archives` - 获取文章归档
- `GET /article/search?query=<关键词>` - 搜索文章

### 评论相关
- `GET /comment/get-comments/<article_id>` - 获取文章评论
- `POST /comment/create/<article_id>` - 创建评论

### 统计相关
- `GET /statistic/overview` - 获取统计概览
- `GET /statistic/daily-views` - 获取每日浏览量

## 数据库管理

### 清空数据
如果需要清空所有数据重新开始，可以修改`seed_data.py`脚本，取消注释`clear_existing_data()`函数的调用。

### 数据库配置
数据库配置在`config.py`文件中：
```python
MYSQL_HOST = 'localhost'
MYSQL_PORT = 3306
MYSQL_USER = 'root'
MYSQL_PASSWORD = 'your_password'
MYSQL_DB = 'blog_db'
```

### 创建数据库
如果数据库不存在，需要先创建：
```sql
CREATE DATABASE blog_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

## 故障排除

### 1. 数据库连接失败
**症状**：脚本报告"数据库连接失败"
**解决方案**：
- 确保MySQL服务正在运行
- 检查`config.py`中的数据库配置
- 确保数据库`blog_db`已创建

### 2. 外键约束错误
**症状**：删除数据时出现外键约束错误
**解决方案**：
- 按正确顺序删除数据：评论 → 文章标签 → 标签 → 文章
- 使用脚本中的`clear_existing_data()`函数

### 3. 数据重复
**症状**：运行多次脚本后数据重复
**解决方案**：
- 运行前先清空现有数据
- 或修改脚本避免重复插入

## 开发建议

1. **测试环境**：在开发环境中使用演示数据
2. **生产环境**：不要在生产环境运行这些脚本
3. **数据备份**：运行清空数据操作前备份重要数据
4. **自定义数据**：根据需要修改脚本中的数据模板

## 下一步

1. 启动后端服务器：`python app.py`
2. 启动前端项目：`cd ../Blog-Web && npm run dev`
3. 访问前端：http://localhost:5173
4. 测试API端点：http://localhost:5000
